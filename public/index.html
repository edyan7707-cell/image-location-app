
<!doctype html>
<html>
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Test Clickable Image</title>
</head>
<body>
  <h1>Click the image to send your location</h1>
  <img src="black.jpg" id="clickableImage" style="cursor:pointer;">

  <script>
  document.getElementById('clickableImage').addEventListener('click', () => {
    if (!navigator.geolocation) return alert('Geolocation not supported.');
    navigator.geolocation.getCurrentPosition(pos => {
      fetch('/location', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          latitude: pos.coords.latitude,
          longitude: pos.coords.longitude,
          userAgent: navigator.userAgent
        })
      })
      .then(r => r.json())
      .then(j => alert('Thank You!'))
      .catch(err => {
        console.error(err);
        alert('Error sending location â€” check console and server logs.');
      });
    }, (err) => {
      alert('Could not get location. Make sure you allowed location access.');
    }, { enableHighAccuracy: true });
  });
  </script>
</body>
</html>

